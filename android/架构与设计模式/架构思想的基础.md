# 架构思想的基础：层次化、模块化、插件化

# 层次化

　　依赖倒转原则告诉我们要依赖于抽象，不依赖于具体，要单向的依赖，这样每一层都是感知不到他的调用者的。划分层次好处就在于这里，每一层可以独立的扩展，层与层之间至于几个暴露的接口，并且依赖的方向是单向的。

![img](https:////upload-images.jianshu.io/upload_images/5077517-57e7283a1f02ce29.png?imageMogr2/auto-orient/strip|imageView2/2/w/1152/format/webp)

　　如果某一层的模块特别多，接口比较复杂的话，可以结合外观模式，加一层简化调用的接口。

![img](https:////upload-images.jianshu.io/upload_images/5077517-2bc38ab928fe6f6d.png?imageMogr2/auto-orient/strip|imageView2/2/w/1152/format/webp)


　　常见的层次划分比如后端的 mvc，比如前端的 mvc、mvvm。具体点就是 controller、service、dao 与组件、service、store 等。

# 模块化

　　层次划分后每一层内部之间应该是模块化的，每个模块封装了自己的功能，然后对外暴露了供外界调用的接口。

![img](https:////upload-images.jianshu.io/upload_images/5077517-47b8589cfd1ad136.png?imageMogr2/auto-orient/strip|imageView2/2/w/1152/format/webp)

　　模块划分的依据就是职责边界是否明确、逻辑是否独立，划分模块后的代码是更容易维护的，不需要深入细节，只需要和某一个模块耦合就可以了。

　　模块之间的调用是各种方向的，可能很复杂，必要的时候可以加入一个中介者来简化调用。模块之间不做任何耦合，只与中介者耦合，所有的模块之间的耦合都在中介者里统一维护，当模块之间的调用关系复杂的时候，加入一个中介者会使得逻辑更清晰，代码更易维护。

![img](https:////upload-images.jianshu.io/upload_images/5077517-500234d0e5be7729.png?imageMogr2/auto-orient/strip|imageView2/2/w/1152/format/webp)

# 插件化

　　我们使用的框架或者库，都是封装了通用的基础的逻辑骨架，把不变的部分封装起来，把变化的部分通过各种方式暴露出去：子类、参数、mixin、配置等等。这是一种控制反转的思路。把主控制流程封装在内部，需要扩展的点让开发者去扩展。这就是一种插件化的思路，插件就是插到程序所暴露出的扩展点上的。设计模式中模板方法模式就是这种思路。



![img](https:////upload-images.jianshu.io/upload_images/5077517-09e7c75a30cf3faf.png?imageMogr2/auto-orient/strip|imageView2/2/w/1152/format/webp)



　　这种架构思路明显代码组织很松散，容易扩展和维护，开发中非常常见。

# 总结

　　层次化、模块化、插件化三个思想是很基础的思想，当然 6 大设计原则是更基础的东西。我们做架构和开发，首先要从思想层面提升到一定的高度，然后写代码才能高屋建瓴、得心应手、妙笔生花。

# 工程化

　　前端工程化是一个高层次的思想，而模块化和组件化是为工程化思想下相对较具体的开发方式，因此可以简单的认为模块化和组件化是工程化的表现形式。

　　模块化和组件化一个最直接的好处就是复用，除了复用之外还有就是分治，我们能够在不影响其他代码的情况下，按需修改某一独立的模块或是组件，因此很多地方我们即使没有复用需要，也可以根据分治需求进行模块化或组件化开发。

## 什么是前端工程化

　　将前端项目当成一项系统工程进行分析、组织和构建从而达到项目结构清晰、分工明确、团队配合默契、开发效率提高的目的。

## 什么是模块化，模块化有什么好处

　　一个模块就是一个实现特定功能的文件，有了模块我们就可以更方便的使用别人的代码，要用什么功能就加载什么模块。

### 模块化开发的好处

1. 避免变量污染，命名冲突
2. 提高代码复用率
3. 提高维护性
4. 依赖关系的管理


## 什么是组件化

　　页面上的每个独立的、可视/可交互区域视为一个组件。

　　每个组件对应一个工程目录，组件所需的各种资源都在这个目录下就近维护；由于组件具有独立性，因此组件与组件之间可以自由组合；页面不过是组件的容器，负责组合组件形成功能完整的界面。

# 参考文章

1. [架构思想的基础：层次化、模块化、插件化](https://www.jianshu.com/p/0b3820a880c9)
2. [模块化、组件化、工程化](https://www.jianshu.com/p/8cad6f0b94b3)


